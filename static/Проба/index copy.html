<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Галерея объектов</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .page-btn.active {
            background-color: #0d6efd;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container py-4">
        <div id="gallery" class="row g-3"></div>

        <nav class="d-flex justify-content-center mt-4">
            <ul class="pagination" id="pagination"></ul>
        </nav>
    </div>

    <script>
        const objects = Array.from({ length: 160 }, (_, i) => ({
            title: `Объект ${i + 1}`,
            //           img: `https://via.placeholder.com/150?text=${i + 1}`,
            img: `https://images.unsplash.com/photo-1543466835-00a7907e9de1`,
        }));

        const itemsPerPage = 18;
        const pagesPerGroup = 5;
        let currentPage = 1;

        function renderGallery(page) {
            const gallery = document.getElementById("gallery");
            gallery.innerHTML = "";
            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageItems = objects.slice(start, end);

            pageItems.forEach((obj) => {
                const col = document.createElement("div");
                col.className = "col-12 col-sm-6 col-md-3 col-lg-2";

                col.innerHTML = `
          <div class="card h-100">
            <img src="${obj.img}" class="card-img-top" alt="${obj.title}" />
            <div class="card-body text-center">
              <h6 class="card-title">${obj.title}</h6>
              <button class="btn btn-primary btn-sm">Подробнее</button>
            </div>
          </div>
        `;
                gallery.appendChild(col);
            });
        }

        function renderPagination() {
            const totalPages = Math.ceil(objects.length / itemsPerPage);
            const pagination = document.getElementById("pagination");
            pagination.innerHTML = "";

            const groupIndex = Math.floor((currentPage - 1) / pagesPerGroup);
            const start = groupIndex * pagesPerGroup + 1;
            const end = Math.min(start + pagesPerGroup - 1, totalPages);

            // << К началу
            pagination.appendChild(createPageItem("<<", 1, currentPage === 1));

            // < Назад на 5
            pagination.appendChild(createPageItem("<", start - 1, start === 1));

            // Страницы группы
            for (let i = start; i <= end; i++) {
                const li = createPageItem(i, i, false, i === currentPage);
                pagination.appendChild(li);
            }

            // > Вперед на 5
            pagination.appendChild(createPageItem(">", end + 1, end === totalPages));

            // >> В конец
            pagination.appendChild(createPageItem(">>", totalPages, currentPage === totalPages));
        }

        function createPageItem(label, page, disabled, active = false) {
            const li = document.createElement("li");
            li.className = `page-item ${disabled ? "disabled" : ""}`;
            const btn = document.createElement("button");
            btn.className = `page-link page-btn ${active ? "active" : ""}`;
            btn.textContent = label;
            btn.onclick = () => {
                if (!disabled) {
                    currentPage = page;
                    renderGallery(currentPage);
                    renderPagination();
                }
            };
            li.appendChild(btn);
            return li;
        }

        // Первая отрисовка
        renderGallery(currentPage);
        renderPagination();
    </script>
</body>

</html>